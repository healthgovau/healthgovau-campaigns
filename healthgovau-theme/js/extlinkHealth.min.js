!function(t){Drupal.settings.extlinkHealth={extRel:"external"},Drupal.extlinkHealth=Drupal.extlinkHealth||{},Drupal.extlinkHealth.attach=function(e,l){if(l.hasOwnProperty("extlinkHealth")){var a,n=/^(([^\/:]+?\.)*)([^\.:]{4,})((\.[a-z]{1,4})*)(:[0-9]{1,5})?$/,i=window.location.host.replace(n,"$3$4"),s=window.location.host.replace(n,"$1");a=l.extlinkHealth.extSubdomains?"([^/]*\\.)?":"www."==s||""==s?"(www\\.)?":s.replace(".","\\.");var x=new RegExp("^https?://"+a+i,"i"),h=!1;l.extlinkHealth.extInclude&&(h=new RegExp(l.extlinkHealth.extInclude.replace(/\\/,"\\"),"i"));var r=!1;l.extlinkHealth.extExclude&&(r=new RegExp(l.extlinkHealth.extExclude.replace(/\\/,"\\"),"i"));var p=!1;l.extlinkHealth.extCssExclude&&(p=l.extlinkHealth.extCssExclude);var k=!1;l.extlinkHealth.extCssExplicit&&(k=l.extlinkHealth.extCssExplicit);var c=new Array,H=new Array;t("a:not(."+l.extlinkHealth.extClass+", ."+l.extlinkHealth.mailtoClass+"), area:not(."+l.extlinkHealth.extClass+", ."+l.extlinkHealth.mailtoClass+")",e).each(function(e){try{var l=this.href.toLowerCase();0!=l.indexOf("http")||(l.match(x)||r&&l.match(r))&&(!h||!l.match(h))||p&&t(this).parents(p).length>0||k&&t(this).parents(k).length<1?"AREA"==this.tagName||0!=l.indexOf("mailto:")||p&&t(this).parents(p).length>0||k&&t(this).parents(k).length<1||H.push(this):c.push(this)}catch(a){return!1}}),l.extlinkHealth.extClass&&Drupal.extlinkHealth.applyClassAndSpan(c,l.extlinkHealth.extClass),l.extlinkHealth.extRel&&Drupal.extlinkHealth.applyExternalRel(c,l.extlinkHealth.extRel),l.extlinkHealth.mailtoClass&&Drupal.extlinkHealth.applyClassAndSpan(H,l.extlinkHealth.mailtoClass),l.extlinkHealth.extTarget&&t(c).attr("target",l.extlinkHealth.extTarget),Drupal.extlinkHealth=Drupal.extlinkHealth||{},Drupal.extlinkHealth.popupClickHandler=Drupal.extlinkHealth.popupClickHandler||function(){return l.extlinkHealth.extAlert?confirm(l.extlinkHealth.extAlertText):void 0},t(c).click(function(t){return Drupal.extlinkHealth.popupClickHandler(t)})}},Drupal.extlinkHealth.applyClassAndSpan=function(e,l){var a;if(Drupal.settings.extlinkHealth.extImgClass)a=t(e);else{var n=t(e).find("img").parents("a");a=t(e).not(n)}a.addClass(l);var i,s=a.length;for(i=0;s>i;i++){var x=t(a[i]);("inline"==x.css("display")||"inline-block"==x.css("display"))&&(l==Drupal.settings.extlinkHealth.mailtoClass?x.append('<span class="'+l+'"><span class="element-invisible"> '+Drupal.settings.extlinkHealth.mailtoLabel+"</span></span>"):x.append('<span class="'+l+'"><span class="element-invisible"> '+Drupal.settings.extlinkHealth.extLabel+"</span></span>"))}},Drupal.extlinkHealth.applyExternalRel=function(e,l){var a=t(e).find("img").parents("a"),n=t(e).not(a);n.each(function(){t(this).attr("rel",l)})},Drupal.behaviors.extlinkHealth=Drupal.behaviors.extlinkHealth||{},Drupal.behaviors.extlinkHealth.attach=function(t,e){"function"==typeof extlinkAttach?extlinkAttach(t):Drupal.extlinkHealth.attach(t,e)}}(jQuery);